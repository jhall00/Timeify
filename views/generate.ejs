<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- for tailwind (uncomment when ready to use) -->
    <link rel="stylesheet" href="/styles.css">

    <title>Generate</title>
</head>

<body>


<div class="flex justify-center">

    <div class="main">
        <div class="navbar">
            <a href="/home">
                <img src="Logo.svg" class="p-2 h-14" />
            </a>
            <div class="justify-end pt-3">

                <a class="hover:text-xl pr-6 font-bold text-main-green text-lg underline decoration-2 underline-offset-1"
                   href="/generate">Generate</a>
                <a class="hover:text-xl pr-6 font-bold text-main-green text-lg" href="/load">Load</a>

            </div>
        </div>

        <p class="flex justify-center p-8 text-2xl text-main-green">Create a new timed playlist.</p>

        <div class="flex justify-center">
            <div
                    class="bg-gradient-to-br from-green_grad1 to-green_grad2 backdrop-blur-lg shadow-lg w-5/6 h-max rounded-2xl p-10 flex justify-center">

                <form action="/playlists" method="get">

                    <div class="md:flex md:items-center mb-6">
                        <div class="w-1/3 flex items-center">
                            <div id="lengthInstructions" class="invisible bg-gray-200 absolute mb-16 rounded-lg">
                                <p class=" p-1 text-xs">Choose how long you want <br> your timed playlist to be.</p>
                            </div>
                            <img id ="lengthQ"class="p-2"src="/questionMark.svg" alt="question mark">
                            <label
                                    class="block text-white font-bold md:text-right mb-1 md:mb-0 pr-1"
                                    for="length_minutes">
                                Timer Length
                            </label>
                        </div>


                        <div class="flex w-2/3">

                            <div class="relative md:w-2/3">
                                <select
                                        class=" bg-white hover:bg-gray-200 hover:cursor-pointer appearance-none border-2 border-gray-200 rounded w-fit py-2 pl-3 pr-6 ml-2 text-gray-700 leading-tight focus:outline-none focus:bg-white"
                                        id="length_minutes" type="text" name="length_hours">
                                    <option value="" disabled selected>Hours</option>

                                    <% var i = 0; %>
                                    <% while (i <= 500) { %>
                                        <option>
                                            <%= i; %>
                                        </option>
                                    <% i++; } %>

                                </select>
                                <div
                                        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg"
                                         viewBox="0 0 20 20">
                                        <path
                                                d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                    </svg>
                                </div>

                            </div>

                            <div class="relative md:w-2/3">
                                <select
                                        class=" bg-white hover:bg-gray-200 hover:cursor-pointer appearance-none border-2 border-gray-200 rounded w-fit py-2 pl-3 pr-6  ml-2 text-gray-700 leading-tight focus:outline-none focus:bg-white"
                                        id="length_minutes" type="text" name="length_minutes">
                                    <option value="" disabled selected>Minutes</option>

                                    <% var i = 0; %>
                                    <% while (i < 60) { %>
                                        <option>
                                            <%= i; %>
                                        </option>
                                    <% i += 5; } %>
                                </select>
                                <div
                                        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg"
                                         viewBox="0 0 20 20">
                                        <path
                                                d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                    </svg>
                                </div>

                            </div>

                            <div class="relative md:w-2/3">
                                <select
                                        class=" bg-white hover:bg-gray-200 hover:cursor-pointer appearance-none border-2 border-gray-200 rounded w-fit py-2 pl-3 pr-6 ml-2 text-gray-700 leading-tight focus:outline-none focus:bg-white"
                                        id="length_seconds" type="text" name="length_seconds">
                                    <option value="" disabled selected>Seconds</option>

                                    <% var i = 0; %>
                                    <% while (i < 60) { %>
                                        <option>
                                            <%= i; %>
                                        </option>
                                    <% i += 5; } %>

                                </select>
                                <div
                                        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg"
                                         viewBox="0 0 20 20">
                                        <path
                                                d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                    </svg>
                                </div>

                            </div>
                        </div>
                    </div>


                    <div class="md:flex md:items-center mb-6">
                        <div class="w-1/3 flex items-center">
                            <div id="sourceInstructions" class="invisible bg-gray-200 absolute mb-20 rounded-lg">
                                <p class=" p-1 text-xs">Tell us what playlist/album <br> you want to use to fill your <br>timer playlist with.</p>
                            </div>
                            <img id="sourceQ" class="p-2" src="/questionMark.svg" alt="question mark">

                            <label
                                    class=" block text-white font-bold md:text-right mb-1 md:mb-0 pr-1"
                                    for="my_source">
                                Source
                            </label>
                        </div>
                        <div class="flex w-2/3">
                            <div class="relative md:w-1/2">
                                <button
                                        class=" bg-white hover:bg-gray-200 text-black src-button py-3 px-4 rounded-xl drop-shadow-md ml-2"
                                        id="searchBtn">Select Source
                                </button>

                            </div>
                            <div class="relative md:w-1/2">
                                <div id="selected" class=" text-black text-sm py-3 px-4 rounded-xl drop-shadow-md"></div>
                            </div>
                        </div>

                    </div>


                    <div class="md:flex md:items-center mb-6">
                        <div class="w-1/3 flex items-center">
                            <div id="nameInstructions" class="invisible bg-gray-200 absolute mb-16 rounded-lg">
                                <p class=" p-1 text-xs">What would you like to name <br>your new generated playlist?</p>
                            </div>
                            <img id="nameQ"class="p-2" src="/questionMark.svg" alt="question mark">

                            <label
                                    class="block text-white font-bold md:text-right mb-1 md:mb-0"
                                    for="new_name">
                                Timer Name
                            </label>
                        </div>
                        <input
                                class=" bg-white appearance-none border-2 border-white rounded w-2/3 py-2 pl-3 pr-8 ml-3 text-gray-700 leading-tight focus:outline-none focus:border-dark-gray"
                                id="new_name" type="text" name="newName">
                    </div>
                    <div>
                        <input id="ID" class="hidden" value="" type="text" name="ID"/>
                        <input id="pOra" class="hidden" value = "" type="text" name="pOra"/>
                    </div>

                    <div class="md:flex justify-center">
                        <input
                                class=" bg-mint hover:bg-shadow_mint hover:cursor-pointer text-black text-lg font-bold py-3 px-4 rounded-xl drop-shadow-md"
                                type="submit" id="generateSubmit" value="Generate" /><br><br>
                        <hr>
                    </div>



                </form>

            </div>

        </div>
    </div>
</div>

<div class="search-popup" id="mySearch">
    <div class="search-content rounded-xl">
        <span class="close">&times;</span>
        <h1 class="text-4xl">Spotify Music Search</h1>
        <div class="flex mb-6 items-center">
            <input
                    class=" bg-gray-200 appearance-none border-2 border-gray-200 rounded w-fit py-2 pl-3 pr-8 mt-4 mr-4 text-gray-700 leading-tight focus:outline-none focus:bg-white"
                    id="search_term" type="search" name="searchTerm" aria-label="Search" placeholder="Search"><br>
            <input
                    class=" bg-mint hover:bg-shadow_mint text-black font-bold py-3 px-4 mt-4 rounded-xl drop-shadow-md"
                    id="searchSubmit" type="submit" value="Search" name="search" /><br><br>
        </div>
        <hr>
        <br>
        <div class="mb-4" id="popup-albPly-btn">
            <input class="text-black py-3 px-4 rounded-xl drop-shadow-md cursor-pointer selected" type="button" value="Albums"
                   name="albums" id="album_button" />

            <input class="  text-black py-3 px-4 rounded-xl drop-shadow-md cursor-pointer" type="button"
                   value="Playlists" name="playlists" id="playlist_button" />
        </div>

        <div class="flex" id="searchResults">



        <div class="mb-4">
            <% if (results.length > 0) { %>
                <% results.forEach(result => { %>
                    <p>
                        <%= result.title; %>
                    </p>

                <% }); %>
            <% } %>
        </div>
    </div>
        <div class="items-center">
            <button class="bg-main-green opacity-50 cursor-not-allowed text-white py-3 px-4 rounded-xl drop-shadow-md cursor-pointer"
                    type="button" value="Confirm" name="confirm" id="confirm_button">Confirm</button>
        </div>
    </div>

</div>


<!-- <a href="/playlists">
    <button class="justify-center bg-white hover:bg-shadow_mint text-black font-bold src-button py-3 px-4 rounded-xl drop-shadow-md">
        Hard-coded link to playlist calculations
    </button>
</a> -->

<script>
  var search = document.getElementById("mySearch");
  var btn = document.getElementById("searchBtn");
  var closeBtn = document.getElementsByClassName("close")[0];
  var confirm = document.getElementById("confirm_button");
  btn.onclick = function() {
    search.style.display = "block";
    return false;
  };

  closeBtn.onclick = function() {
    search.style.display = "none";
    //clear old search results when clicking the close button.
    if (document.getElementById("searchResults").innerHTML !== "") {
      document.getElementById("searchResults").innerHTML = "";
    }
    var elementById = document.getElementById("search_term");
    if (elementById instanceof HTMLInputElement) {
      if (elementById.value !== "") {
        elementById.value = "";
      }
    }
  };

  window.onclick = function(event) {
    if (event.target == search) {
      search.style.display = "none";
    }
  }

  confirm.onclick = function(){
    search.style.display = "none";
  }
</script>
<script src="/search.js"></script>
<script src="/generate.js"></script>


</body>

</html>
